<div class="d-sm-flex align-items-center justify-content-between mb-4">
    <h1 class="h3 mb-0 text-gray-800">{{'Withdraw Rewards'|trans}}</h1>
    <a href="#" class="d-none d-sm-inline-block btn btn-sm btn-primary shadow-sm"><i
      class="fas fa-download fa-sm text-white-50"></i> <span id='rate'></span></a>
    </div>
    <div class="row justify-content-center"> 
    <form method="post" class="align-items-center" style="min-height:300px; margin:50px">
      <div id='withdraw_rewards'>
        {% if error is defined %}
              <div class="alert alert-danger">{{ error.messageKey|trans(error.messageData, 'security') }}</div>
              {% endif %}
        
      <h3 style="text-align: center; margin-bottom: 20px">{{'Minimum withdrawal is 10 XPI'|trans}}</h3>
      
      <div class='form-group'><input class='form-control' type='number' name='credit' id='amount' placeholder='{{'Amount in XPI'|trans}}' required autofocus></div>
      <div class="form-group" ><button class="btn btn-primary btn-block" type="submit">{{'Send'|trans}}</button>
      </div>
      </div>
  
    </form>
    </div>
  <script type="text/javascript">
  $(document).ready(function(){
  window.history.pushState("", "", '#withdraw-rewards');
  //CONTACT API PAIEMENT
  var amount;
  //VALEUR ACTUELLE DU JETON XPI
  $.ajax({
       url: "https://soleaspay.com/convert",
       type: "GET",
       dataType: "JSON",
       data: {amount: '1',
              devise: 'XPI'},
       success:function(data)
        {
             xafValue = parseInt(data.data.XAF);
          usdValue = data.data.USD;
          $('#rate').text('1 XPI = '+xafValue+' FCFA');
        }
    });
  
  $('form').on('submit', function(e){
      e.preventDefault();
      amount = $('#amount').val();
      
       $.ajax({
       url: "{{ path('sopay_withdraw_rewards') }}",
       type: "POST",
       dataType: "JSON",
       data: {amount: amount},
       success:function(data)
        { 
            alert(data.message);
        }
    });
  });
  });
  </script>